# Courses

## Course Attributes

Attribute | Type | Description
--------- | ------- | -----------
`id` | integer | A unique and autoincrementing identifier for the Course which is generated by RedSeed automatically. | true
`name` | text | The course name
`status` | 'Active', 'Locked', 'Inactive', 'System' | The Course status. see User type. Used to set user abilities & permissions
`activeVersion` | Course version resource | The active version of the course. Courses may have multiple versions but only one may be active.
`description` | string | Course description
`completion_time` | integer | The median course completion time in seconds
`dateCreatedAt` | datetime | The datetime the course resource was created at
`dateUpdatedAt` | datetime | The datetime the course resource was last updated at
`dateReleasedAt` | datetime | The datetime the course resource was released at
`versions` | array of course versions | All Course version resources associated with this course, including the active course version.
`categories` | array of course categories | All Course categories that have been assigned to the course.


### Course type

Course type controls if a user can be enrolled in a course and if an existing enrollment is visible.

Parameter | Description
--------- | -----------
Active | Users can be enrolled in the course. Users with existing enrollments can complete the course.
Locked | Users cannot be enrolled in the course. Users with existing enrollments can complete the course.
Inactive | Users cannot be enrolled in the course. Existing Enrollments are not shown.


## Getting courses
```shell
curl --location --request GET 'https://api.redseed.me/api/v0/courses' \
--header 'Accept: application/json' \
--header 'Authorization: Bearer <YOUR_API_TOKEN>' \
--header 'Content-Type: application/json'

```
> The above command returns a JSON response structured like this:

```json
{
    "data": [
        {
            "id": 42694364,
            "name": "Red Course",
            "status": "Active",
            "description": "A course about red",
            "completion_time": 600,
            "dateCreatedAt": "2024-01-31T19:49:30.000000Z",
            "dateUpdatedAt": "2024-01-31T19:49:30.000000Z",
            "dateReleasedAt": "2024-01-31T19:49:30.000000Z",
            "versions": [
                {
                    "id": 14,
                    "version_id": 2,
                    "launch_url": "index.html",
                    "schema_version": "xapi",
                    "dateCreatedAt": "2024-01-31T19:49:30.000000Z",
                    "dateUpdatedAt": "2024-01-31T19:49:30.000000Z"
                }
            ]
        },
        {
            "id": 355230263,
            "name": "Blue Course",
            "status": "Active",
            "description": "A course about blue",
            "completion_time": 0,
            "dateCreatedAt": "2024-01-31T19:49:30.000000Z",
            "dateUpdatedAt": "2024-01-31T19:49:30.000000Z",
            "dateReleasedAt": "2024-01-31T19:49:30.000000Z",
            "versions": [
                {
                    "id": 15,
                    "version_id": 3,
                    "launch_url": "index.html",
                    "schema_version": "1.2",
                    "dateCreatedAt": "2024-01-31T19:49:30.000000Z",
                    "dateUpdatedAt": "2024-01-31T19:49:30.000000Z"
                }
            ]
        }
    ],
    "links": {
        ...
    },
    "meta": {
        ...
    }
}
```

This endpoint retrieves all course records. It returns a JSON object that includes an array of course resources.

Results are returned in pages of 100 records. You can specify the page number to return using the page query parameter. If no page is specified, the first page will be returned.

### HTTP Request Examples

Fetch all courses :<br>
`GET https://api.redseed.me/api/v0/courses`

Fetch page 2 of all courses :<br>
`GET https://api.redseed.me/api/v0/courses?page=2`

Fetch all courses with a course.type of Active :<br>
`GET https://api.redseed.me/api/v0/courses?status[]=Active`

Fetch course 2205 :<br>
`GET https://api.redseed.me/api/v0/courses/?course_id[]=2205`

Fetch courses 3306 & 3307 :<br>
`GET https://api.redseed.me/api/v0/courses/?course_id[]=3306&course_id[]=3307`

Fetch only external courses :<br>
`GET https://api.redseed.me/api/v0/courses/?external=1`

Fetch only non-external courses :<br>
`GET https://api.redseed.me/api/v0/courses/?external=0`

Fetch courses with specific external reference IDs :<br>
`GET https://api.redseed.me/api/v0/courses/?external_ref_id[]=123&external_ref_id[]=789`

Fetch courses with specific custom_fields keys and values :<br>
`GET https://api.redseed.me/api/v0/courses/?custom_fields[owner]=ABC12345&custom_fields[department]=sales`


### Query Parameters

Parameter           | Default | Description
------------------- | ------- | -----------
page                | 1       | The page of results to retrieve. If no page is specified, the first page will be returned.
course_id[]         | -       | Retrieve this course resource. Supports multiple values.
status[]            | All     | Retrieve courses with this course type only. Supports multiple values.
external            | All     | Filter courses by external flag. Use `1` for external courses, `0` for non-external courses.
external_ref_id[]    | -      | Retrieve courses with specific external reference IDs. Supports multiple values.
custom_fields[key]=value   | - | Retrieve courses with specific custom_fields keys and values. Supports multiple values.

<aside class="notice">
Custom field keys must contain only alphanumeric characters, underscores, hyphens and fullstops.
</aside>

<aside class="success">
If you select a single course via the course_id[] parameter the course resource will still be returned inside an array!
</aside>

## Getting course details
You can also fetch a single course resource like this :

```shell
curl --location --request GET 'https://api.redseed.me/api/v0/course/297065' \
--header 'Authorization: Bearer <YOUR_API_TOKEN>'
```

> The above command returns a JSON response structured like this:

```json
{
    "data": {
        "id": 205141907,
        "name": "Orange Course",
        "status": "Active",
        "description": "A course about oranges",
        "completion_time": 1230,
        "dateCreatedAt": "2017-09-15T01:24:53.000000Z",
        "dateUpdatedAt": "2017-09-15T01:24:53.000000Z",
        "dateReleasedAt": "2017-09-15T01:24:53.000000Z"
    }
}
```

This endpoint is used to fetch details about a specific course record. It returns a JSON object.

### HTTP Request
`
GET https://api.redseed.me/api/v0/course/<course.id>
`
### URL Parameters

Parameter | Description
--------- | -----------
`<course.id>` | The ID of the course resource to retrieve.

## Creating a course
```shell
curl --location --request POST 'https://api.redseed.me/api/v0/courses' \
--header 'Accept: application/json' \
--header 'Authorization: Bearer {MY_API_TOKEN}' \
--header 'Content-Type: application/json' \
--data-raw '{
    "name": "Test Course",
    "description": "Test Description",
    "status": "Active",
    "categories": [
        {"id": 8908},
        {"id": 8909}
    ],
    "config": {
        "external_ref_id": "1234567890",
        "external_url": "https://example.com",
        "bulk_enroll": true,
        "self_enroll": false,
        "training_points": 10,
        "custom_fields": {
            "custom_field": "custom value",
            "course_code": "EXT-123",
            "provider": "External Training Provider"
        }
    },
    "versions": [
        {"schema": "External"}
    ]
}'
```
> The above command returns JSON structured like this:

```json
{
    "id": 42694364,
    "ulid": "01HF5GXCQ8JTDM3KPVS6QWERTY",
    "name": "Test Course",
    "description": "Test Description",
    "status": "Active",
    "categories": [
        {
            "id": 8908,
            "name": "red"
        },
        {
            "id": 8909,
            "name": "blue"
        }
    ],
    "activeVersion": {
        "id": 14,
        "version_id": 1,
        "schema": "External",
        "preview_url": null,
        "dateCreatedAt": "2023-02-10T14:30:00.000000Z",
        "dateUpdatedAt": "2023-02-10T14:30:00.000000Z"
    },
    "completion_time": null,
    "dateCreatedAt": "2023-02-10T14:30:00.000000Z",
    "dateUpdatedAt": "2023-02-10T14:30:00.000000Z",
    "dateReleasedAt": null,
    "image_url": "https://redseed.me/images/default-course.png",
    "config": {
        "id": 12345,
        "bulk_enroll": 1,
        "certificate": 0,
        "due_days": null,
        "expires_at": null,
        "expires_reminder_days": null,
        "expiresat_months": null,
        "inactive_days": 14,
        "multiple_enrollments": 0,
        "self_enroll": 0,
        "training_points": 10,
        "workbook": 0,
        "external_ref_id": "1234567890",
        "external_url": "https://example.com",
        "custom_fields": {
            "custom_field": "custom value",
            "course_code": "EXT-123",
            "provider": "External Training Provider"
        }
    },
    "versions": [
        {
            "id": 14,
            "version_id": 1,
            "schema": "External",
            "preview_url": null,
            "dateCreatedAt": "2023-02-10T14:30:00.000000Z",
            "dateUpdatedAt": "2023-02-10T14:30:00.000000Z"
        }
    ]
}
```

This endpoint creates a new course. It returns a JSON object containing the created course resource.

### HTTP Request
`POST https://api.redseed.me/api/v0/courses`


### Body Parameters
Parameter | Type | Required | Description
--------- | ---- | -------- | -----------
`name` | string | Required | The name of the course
`description` | string | Optional | A description of the course
`status` | string | Required | Must be one of: 'Active', 'Locked', or 'Inactive'
`categories` | array | Optional | Array of category objects with `id` field referencing existing course categories
`config` | object | Optional | Configuration options for the course
`config.external_ref_id` | string | Optional | External reference ID for the course
`config.external_url` | string | Optional | Valid URL for external courses
`config.bulk_enroll` | boolean | Optional | Whether bulk enrollment is enabled for this course
`config.self_enroll` | boolean | Optional | Whether self-enrollment is enabled for this course
`config.training_points` | integer | Optional | Number of training points awarded for completing this course
`config.custom_fields` | object | Optional | Additional metadata for external courses as key-value pairs
`versions` | array | Required | At least one version object must be provided
`versions[].schema` | string | Required | The schema type for the version, e.g., 'External'

<aside class="notice">
Course images cannot be set or edited via the API. Users must log in to the RedSeed application to upload or change course images.
</aside>


## Updating a course
```shell
curl --location --request PUT 'https://api.redseed.me/api/v0/courses/{course_id}' \
--header 'Accept: application/json' \
--header 'Authorization: Bearer {MY_API_TOKEN}' \
--header 'Content-Type: application/json' \
--data-raw '{
    "name": "Updated Course Name",
    "description": "Updated Description",
    "status": "Active",
    "categories": [
        {"id": 8908},
        {"id": 8909}
    ],
    "config": {
        "external_ref_id": "ABC12345",
        "external_url": "https://example.com/newurl",
        "custom_fields": {
            "owner": 12345,
            "costcenter": "ABC12345",
            "custom_field": "Updated Custom Field Value"
        }
    },
    "versions": [
        {"schema": "External"}
    ]
}'
```

This endpoint is used to update an existing course. It returns a JSON object with the updated course resource.

### HTTP Request
`PUT https://api.redseed.me/api/v0/courses/{course_id}`

### URL Parameters
Parameter | Description
--------- | -----------
`{course_id}` | The ID of the course to update

### Parameters
Attribute | Type | Required / Optional
--------- | --------- | ---------
`name` | string | Required
`description` | string | Optional
`status` | string | Required - Must be one of: 'Active', 'Locked', 'Inactive', 'System'
`categories` | array | Optional - Array of category objects with IDs
`config` | object | Optional - Course configuration object
`config.external_ref_id` | string | Optional - External reference ID
`config.external_url` | string | Optional - External URL
`config.custom_fields` | object | Optional - Custom fields object with alphanumeric keys and string values
`versions` | array | Required - Array containing at least one version object with schema

<aside class="notice">
Custom field keys must contain only alphanumeric characters, underscores, hyphens and fullstops.
</aside>

